---
title: "ggplot2 geoms (practice)"
---

```{r , include=FALSE, eval=TRUE}
pulse <- read_pulse()
survey <- read_survey()
```

## Multitopic exercises

1. *Dynamic plots with plotly*.  
The plots generated by `ggplot2` library are static (simple images).  
`plotly` library allows to produce plots with additional functionality.  
Install the `plotly` package and load `library( plotly )`.  
Next, create a scatter plot (e.g. height vs. weight from pulse data set) and store it in variable `p`.  
Finally, execute `ggplotly( p )` to produce a dynamic plot.

```{r fig.width=7,fig.height=5}
# install.packages( "plotly" )
# library( plotly )

p <- ggplot( pulse ) +
  aes( x = weight, y = height, color = gender, shape = alcohol ) +
  geom_point() +
  theme_bw()
p              # this is static ggplot2 image
ggplotly( p )  # this is a ggplot converted by plotly to a dynamic version
```

2. *Reshaping a table for plotting; density plot*.  
Let's assume that for the pulse data set we want to visualize changes of pulse caused by running.  
First, understand the density plot below (the panels stratify whether a participant was running/sitting; the color denotes the pulse before/after the running/sitting).  
The `geom_density` plotting method requires a single variable (column) with all pulses (let's call it `pulse` and use for the `x` aesthetic) and another variable (column) defining the pulse group (let's call it `whichPulse` and use for `color` aesthetic).  
Write the code to reshape the `pulse` table and reproduce the plot.

```{r eval=TRUE}
d <- pulse %>%
  rename( before = pulse1, after = pulse2 ) %>% 
  gather( key = "whichPulse", value = "pulse", before, after )
```

```{r}
head( d ) # check the new columns whichPulse and pulse
```

```{r eval=TRUE,message=FALSE,warning=FALSE}
ggplot( d ) +
  aes( x = pulse, color = whichPulse ) +
  geom_density() +
  facet_grid( ran ~ . ) +
  theme_bw()
```


