---
title: "Basic projects and scripts"
date: "`r format(Sys.time(), '%d %B %Y')`"
params:
  basename: "basic_projects_scripts0"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(comment = NA, paged.print=FALSE)
build_nocode(params) 
```

```{r, child="_navigate.Rmd"} 
``` 

# Overview

- _How to create a new project_: this material shows a general way to setup a new project for a new analysis.
- Here we create the project `Learning_R` used during the course.

# Concept of a project and of scripts

A typical data analysis involves multiple files:

- **Input files** with data, fixed before analysis (e.g. files in various formats containing tables of data to be analysed).
- **Scripts** or **reports** (there you develop programs in R language to analyse the data and report results).

RStudio uses **projects** to organize files of one analysis and separate them from other analyses.  

# Project

## Create a new project

Follow the subsequent steps to create a new project `Learning_R` (we will use it during this course).  
From the RStudio menu choose: `r show_menu( c( "File", "New project...", "New directory...", "New project..." ) )`.  
In the dialog box:

- As a directory name type: `Learning_R`  
- In the next option you may select where to create this directory.  
- Press `Create project` to finalize the process.

## Check current project

Look at the top right corner of the RStudio window to see the current project.  
Refer to the following Figure: `Learning_R` is the currently open project.

Moreover, the title line shows the **project diectory** in which the files of the project are/will be kept.

Finally, note the **project file** `Learning_R.Rproj` in the `Files` panel.  
When you click this file in a file explorer, it should start RStudio and open the clicked project.

![](images/RStudio_new_project.png)

# Input files

## Copy data files

Although R can be used to analyse data from files located anywhere in the filesystem, it is convenient to have such files in the project directory.  
For the following parts of the course you need the files: `pulse.csv` and `survey.csv`.  
Download (with a browser) or copy (with the system file explorer) these files to the project directory -- here the details depend on the operating system of your computer.

Once the files are present in the project directory, they should be visible in the `Files` panel:

![](images/RStudio_data_files.png)

## Check access

Copy the following command to the `Console` and execute it to check whether you can access the `pulse.csv` file.  
When the file is present, `TRUE` should be returned:

```{r eval=FALSE,echo=TRUE}
file.exists( "pulse.csv" )
```
```{r eval=TRUE,echo=FALSE}
TRUE
```

# Scripts and reports

## What is an R script

**R script** is a simple text file (with extension `.R`, for example `my_script.R`) containing commands written in R language.  
When an R script is **sourced**, the lines of the script are one-by-one copied to the `Console` and immediately executed.  
An R script allows to save R commands (without saving, the commands given in the `Console` are executed and forgotten).

`r show_warning( "In this course R scripts are not used directly." )`

## What is an R Markdown document

An [**R Markdown** document](https://rmarkdown.rstudio.com/) (with extension `.Rmd`, for example  `my_report.Rmd`) is an extension of an R script.  
It is also a simple text file consisting of:

- **Chunks** written in R language, where data analysis is performed.
- **Free text** written in Markdown notation, possibly containing: sections, lists, tables, [hyperlinks](https://rmarkdown.rstudio.com/docs/), formulae: $r=\sqrt{x^2+y^2}$, etc.

The **Knit** operation converts an R Markdown document into a report file.  
Many report output formats are available: HTML, PDF (printable pages or presentations), Microsoft Word documents, etc.  
_(For example: this page is written in R Markdown and knitted to HTML)_

`r watch_extern_video( url = "https://rmarkdown.rstudio.com/lesson-1.html", title = "R Markdown introduction video", src = "RStudio" )`

`r go_extern( url = "https://www.markdowntutorial.com/", title = "Markdown tutorial", goal = "to quickly practice writing text with Markdown notation" )`

## Create a new R Markdown document

`r show_warning( "Before creating a new document, first check whether you work in the correct project." )`

From the RStudio menu choose: `r show_menu( c( "File", "New File", "R Markdown..." ) )`.  
In the dialog box you may specify some details of the analysis (later change is possible):

- Title of the analysis.  
(Note, this is NOT the name of the `.Rmd` file; this name will be given when the document gets saved.)
- Name of the author.
- Output format (for now, select HTML).

Once accepted, a new document `Untitled1` is shown.  
The document is not empty; it contains an example written in R Markdown.

![](images/RStudio_new_rmd_file.png)

## Knit an R Markdown document

**Knitting** is the name of the process of conversion from R Markdown text file to a report in one of the target formats.

- Press the `Knit` button to start the conversion.
- If the R Markdown document does not have a name yet, a save dialog box will pop up to ask for the file name.
- Some libraries might get automatically installed before the first `Knit`.
- The knitting process might take a few seconds and then the final document should appear either in a new window or in the `Viewer` pane.  
The Figure below shows the result of knitting of the standard example (R Markdown was saved as `Lesson_1.Rmd` and was knitted to HTML file `Lesson_1.html`):

![](images/RStudio_knitting.png)

## `r todo( "Write own chunks" )`

- header
- clear the chunks
- chunks; insert chunk keystroke
- run a chunk; keystroke, ctrl-Enter (for current command or marked text)
- knit complete document (no changes in environment)
- find the produced html

# `r todo( "For tibble page" )`

- Top task: follow steps in an R Markdown document; knit regularly

- load tidyverse
- read table
- show table
- View command

# `r todo( "To describe somewhere" )`

- comment char (hash)

```{r, child="_exercises_links.Rmd"}
``` 

```{r, child="_navigate.Rmd"} 
``` 
