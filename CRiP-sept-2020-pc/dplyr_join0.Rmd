---
title: 'Join'
# author: "R. Monajemi"
params:
  basename: "dplyr_join0"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(comment = NA, paged.print=FALSE)
build_nocode(params)  # UNCOMMENT IF SLOT HAS TASKS.
pulse <- read_pulse() 
```

```{r, echo=FALSE, results='asis'}
navigate_slots(params)
```

Family of functions to join two data.frames on common `variable(s)`. `*_join(x,y,by)` 

### Join data.frames by a single variable 

The following data.frames `df1` and `df2` hold the variables `height` and `age` respectively with a single common variable `name` :

```{r}
# height 
df1 <- tibble(name = c("Isa","Jaylinn","Mila","Milas","Yara"),
           height = c(160, 172, 182, 157, 162)) 
df1
# age
df2 <- tibble(name = c("Fiene","Jaylinn","Mila","Noah","Yara"),
           age = c(20,24,17,23,17)) 
df2
```

**inner_join**

Return all rows in `df1` where there are matching values of `name` in `df2` and all columns in both `df1` and `df2`: 

```{r}
inner_join(df1,df2,"name")  #  <=> inner_join(df1,df2, by = "name")

```

**left_join**

Return all rows from `df1` and all columns in both `df1` and `df2`, `NA` for missing values in `df2`:

```{r}
left_join(df1,df2,"name")
```

**right_join**

Return all rows from `df2` and all columns in both `df1` and `df2`, `NA` for missing values in `df1`

```{r}
right_join(df1,df2,"name")
```

**semi_join**

Identical to `inner_join` keeping only columns in `df1`  <!-- (exception: no duplicated rows in df1.) -->

```{r}
semi_join(df1,df2,"name")
```

**anti_join**

Complement of `semi_join`, return rows from `df1` with no match in `df2`. 

```{r}
anti_join(df1,df2,"name")
```


**full_join**

All rows and all columns in `df1` and `df2`.

```{r}
full_join(df1,df2,"name")
```


### Join data.frames by multiple variables

Let's split the pulse dataset into two separate dataframes with common variables `name` and `height`: 

```{r}
p1 <- pulse  %>% select(name,height,age,gender,year)
p1
p2 <- pulse  %>% select(-age,-gender,-year)
p2
```

now we want to join them back together using `full_join`: 

```{r}
full_join(p1,p2) # common variables are used when no variable is specicified 
```

It is a better practice to explicitly specify the variables: 

```{r} 
full_join(p1,p2, by = c("name","height"))
```


```{r, child="_exercises_links.Rmd"}
``` 

```{r, echo=FALSE, results='asis'}
navigate_slots(params)
```
